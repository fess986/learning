 <!-- поиск количества детей  -->

<!DOCTYPE HTML>
<html>

<body>

  <ul>
    <li>Животные
      <ul>
        <li>Млекопитающие
          <ul>
            <li>Коровы</li>
            <li>Ослы</li>
            <li>Собаки</li>
            <li>Тигры</li>
          </ul>
        </li>
        <li>Другие
          <ul>
            <li>Змеи</li>
            <li>Птицы</li>
            <li>Ящерицы</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>Рыбы
      <ul>
        <li>Аквариумные
          <ul>
            <li>Гуппи</li>
            <li>Рыба-ангел</li>
          </ul>
        </li>
        <li>Морские
          <ul>
            <li>Морская форель</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>


  <script>
    // первый способ
    // const doc = document.querySelectorAll('li');
    // console.log(doc);

    // for (let i = 0; i < doc.length; i++) {
    //   let sum = 0;
    //   for (let j = i + 1; j < doc.length; j++) {
    //     if (doc[i].contains(doc[j])) {
    //       sum++;
    //     }
    //   }
    //   console.log(doc[i].firstChild.textContent.trim() + ' ' + sum);
    // }

    //второй способ

    const doc = document.querySelectorAll('li');
    const underDoc = doc[0].querySelectorAll('li');
    console.log(doc);
    console.log(underDoc.length);

    for (let i = 0; i < doc.length; i++) {
      const underDoc = doc[i].querySelectorAll('li');
      console.log(doc[i].firstChild.textContent.trim() + ' ' + underDoc.length);
      underDoc.length = 0;
    }

  </script>

</body>

</html>

// ПОИСК И ЧТЕНИЕ НЕСТАНДАРТНЫХ АТТРИБУТОВ

<!DOCTYPE html>
<html>
<body>
  <div data-widget-name="menu">Choose the genre</div>
  <script>
    const ass = document.querySelector('[data-widget-name]');
    //const ass = document.querySelector('div');
    console.log(ass);
    console.log(ass.dataset.widgetName);
    // alert(elem.getAttribute('data-widget-name'));
  </script>
</body>
</html>

// ПОИСК ПО ЗНАЧЕНИЮ АТТРИБУТА

<a name="list">the list</a>
<ul>
  <li><a href="http://google.com">http://google.com</a></li>
  <li><a href="/tutorial">/tutorial.html</a></li>
  <li><a href="local/path">local/path</a></li>
  <li><a href="ftp://ftp.com/my.zip">ftp://ftp.com/my.zip</a></li>
  <li><a href="http://nodejs.org">http://nodejs.org</a></li>
  <li><a href="http://internal.com/test">http://internal.com/test</a></li>
</ul>

<script>
  // добавление стиля для одной ссылки
const listLi = document.querySelectorAll('li');
  let link = document.querySelector('a');
  link.style.color = 'orange';
  console.log(listLi);

//   //МОЕ РЕШЕНИЕ НЕ ПО АТТРИБУТУ А ПО ТЕКСТУ ССЫЛКИ
// for (let i = 0; i < 6; i++) {
//   listLi[i].innerText.startsWith('')
//   if ((!listLi[i].innerText.startsWith('http://internal.com')) && (listLi[i].innerText.includes('://'))) {
//     console.log(listLi[i].innerText + 'asadsfasgdsg111111111111111111111111111');
//     listLi[i].firstChild.style.color = 'orange'; // обращаемся к тегу а. На самом деле нужно изначально собирать массив 'а', а не 'li'
//   }

// ИНТЕРЕСНОЕ РЕШЕНИЕ ИЗ КОММЕНТА
  document.querySelectorAll('a[href*="://"]').forEach( link => {
 if (!link.href.startsWith('http://internal.com')) link.style.color = 'orange'});

 // ТОЖЕ ИЗ КОММЕНТА ПРИ ПОМОЩИ МЕТОДА MATCHES
//  for (let a of document.querySelectorAll('a'))
// if (!a.matches('[href^="http://internal.com"]') && a.matches('[href*="://"]'))
// a.style.color = 'orange'

  //РЕШЕНИЕ УЧЕБНИКА ЧЕРЕЗ GETATTRIBUTE
//   let links = document.querySelectorAll('a');
//   for (let link of links) {
//   let href = link.getAttribute('href');
//   if (!href) continue; // нет атрибута
//   if (!href.includes('://')) continue; // нет протокола
//   if (href.startsWith('http://internal.com')) continue; // внутренняя
//   link.style.color = 'orange';
// }

// БОЛЕЕ ПРОСТОЙ ПУТЬ – ДОБАВИТЬ ПРОВЕРКУ В CSS-СЕЛЕКТОР:
// найти все ссылки, атрибут href у которых содержит ://
// и при этом href не начинается с http://internal.com
// let selector = 'a[href*="://"]:not([href^="http://internal.com"])';
// let links = document.querySelectorAll(selector);

// links.forEach(link => link.style.color = 'orange');
// }
</script>

// СРАВНЕНИЕ МЕТОДОВ ВСТАВКИ КОНТЕНТА
<div id="elem1"></div>
<div id="elem2"></div>
<div id="elem3"></div>
<script>
  let text = '<b>текст</b>';

  elem1.append(document.createTextNode(text));
  elem2.innerHTML = text;
  elem3.textContent = text;
</script>


// ОЧИЩЕНИЕ ЭЛЕМЕНТА
<ol id="elem">
  <li>Привет</li>
  <li>Мир</li>
</ol>
<script>
  function clear(elem) { elem.innerHTML = ''}
  // АЛЬТЕРНАТИВНЫЙ СПОСОБ
//   function clear(elem) {
//   while (elem.firstChild) {
//     elem.firstChild.remove();
//   }
// }
  clear(elem); // очищает список
  console.dir(elem);
</script>


// удаление элемента
<table id="table">
  aaa   <!-- этот не удаляется, потому что  это ошибка хтмл, которая автоматически исправляется браузером и выкидывает а за предел тэйбла -->
  <tr>
    <td>Тест</td>
  </tr>
</table>
<script>
  console.log(table); // таблица, как и должно быть
  table.remove();
  console.log(table);
  // почему в документе остался текст "ааа"??
</script>

<!-- // СОЗДАНИЕ СПИСКА -->

<body>
  <ul>
    <li>asd</li>
    <li>asd</li>
  </ul>
  <script>
let ul = document.querySelector('ul');
console.dir(ul);
let mes = 'ass';
while (mes) {
 let li = document.createElement('li');  // надо постоянно создавать новые, иначе происходит склейка сообщений в одно
 mes = prompt('введите строку');
li.append(mes);
ul.append(li);
}
  </script>
</body>

// РЕШЕНИЕ УЧЕБНИКА
<!DOCTYPE HTML>
<html>
<body>
  <h1>Создать список</h1>
  <script>
    let ul = document.createElement('ul');
    document.body.append(ul);
    while (true) {
      let data = prompt("Введите текст для элемента списка", "");
      if (!data) {
        break;
      }
      let li = document.createElement('li');
      li.textContent = data;
      ul.append(li);
    }
  </script>
</body>
</html>

// РЕКУРСИВНЫЙ ОБХОД ОБЪЕКТА ДЛЯ СОЗДАНИЯ ДОМ-ДЕРЕВА

<!DOCTYPE html>
<html>
<body>

  <div id="container"></div>

  <script>
    let data = {
      "Рыбы": {
        "форель": {},
        "лосось": {}
      },

      "Деревья": {
        "Огромные": {
          "секвойя": {},
          "дуб": {}
        },
        "Цветковые": {
          "яблоня": {},
          "магнолия": {}
        }
      }
    };

    function createTree(container, obj) {
      container.append(createTreeDom(obj));
    }

    function createTreeDom(obj) {
      // если нет дочерних элементов, то вызов возвращает undefined
      // и элемент <ul> не будет создан
      if (!Object.keys(obj).length) return;

      let ul = document.createElement('ul');  // создаем ul

      for (let key in obj) {
        let li = document.createElement('li');
        li.innerHTML = key;

        let childrenUl = createTreeDom(obj[key]);  // вызываем рекурсию с аргументом-ключем объекта
        if (childrenUl) {
          li.append(childrenUl);
        }

        ul.append(li);
      }

      return ul;
    }

    let container = document.getElementById('container');
    createTree(container, data);
  </script>

</body>
</html>


// РЕКУРСИВНЫЙ ПЕРЕБОР ОБЪЕКТА И СОЗДАНИЕ ДЕРЕВА ЧЕРЕЗ INNERHTML
<!DOCTYPE html>
<html>
<body>
  <div id="container"></div>
  <script>
    let data = {
      "Рыбы": {
        "форель": {},
        "лосось": {}
      },
      "Деревья": {
        "Огромные": {
          "секвойя": {},
          "дуб": {}
        },
        "Цветковые": {
          "яблоня": {},
          "магнолия": {}
        }
      }
    };
    function createTree(container, obj) {
      container.innerHTML = createTreeText(obj);
    }
    function createTreeText(obj) { // отдельная рекурсивная функция
      let li = '';
      let ul;
      for (let key in obj) {
        li += '<li>' + key + createTreeText(obj[key]) + '</li>';
      }
      //if (li) {   работает и без этого. возможно просто проверка на пустой объект
        ul = '<ul>' + li + '</ul>'
      //}
      console.log(ul);
       return ul || '';  //  если в ul - underfined , чтобы не приклеивалось лишнего
      //return ul;

    }
    createTree(container, data);
  </script>
</body>
</html>


//  ЗАДАЧА ДОБАВЛЕНИЯ КОЛИЧЕСТВА ДЕТЕЙ В СПИСКЕ
<!DOCTYPE HTML>
<html>
<body>

  <ul>
    <li>Животные
      <ul>
        <li>Млекопитающие
          <ul>
            <li>Коровы</li>
            <li>Ослы</li>
            <li>Собаки</li>
            <li>Тигры</li>
          </ul>
        </li>
        <li>Другие
          <ul>
            <li>Змеи</li>
            <li>Птицы</li>
            <li>Ящерицы</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>Рыбы
      <ul>
        <li>Аквариумные
          <ul>
            <li>Гуппи</li>
            <li>Скалярии</li>
          </ul>
        </li>
        <li>Морские
          <ul>
            <li>Морская форель</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
  <script>
    const doc = document.querySelectorAll('li');
    const underDoc = doc[0].querySelectorAll('li');
    console.log(doc);
    console.log(underDoc.length);
    for (let i = 0; i < doc.length; i++) {
      const underDoc = doc[i].querySelectorAll('li');
      if (underDoc.length) {
      console.log(doc[i].firstChild.textContent.trim() + ' ' + underDoc.length);
      doc[i].firstChild.textContent += `[ ${underDoc.length} ]`;
      }
      underDoc.length = 0;
// решение из учебника.
    //   let lis = document.getElementsByTagName('li');
    // for (let li of lis) {
    //   // получить количество всех <li> ниже этого <li>
    //   let descendantsCount = li.getElementsByTagName('li').length;
    //   if (!descendantsCount) continue;  // пропускаем если нет детей
    //   // добавить непосредственно к текстовому узлу (добавить к тексту)
    //   li.firstChild.data += ' [' + descendantsCount + ']';
    // }
    }
  </script>
</body>
</html>


// ЗАДАЧА НАРИСОВАТЬ КАЛЕНДАРЬ ------------------------------

<!DOCTYPE HTML>
<html>
<head>
  <style>
    table {
      border-collapse: collapse;
    }
    td,
    th {
      border: 1px solid black;
      padding: 3px;
      text-align: center;
    }
    th {
      font-weight: bold;
      background-color: #E6E6E6;
    }
  </style>
</head>
<body>
  <div id="calendar">
  </div>
  <script>
    const calendar = document.querySelector('#calendar')
    function createCalendar(elem, year, month) {
    let date = new Date(year, month - 1);
    let arr = ['пн','вт','ср','чт','пт','сб','вс'];
    console.log(date);
    //console.dir(elem);
    let dateLast = new Date(year, month, 0);  // последнее число предыдущего месяца
    let lastDay = dateLast.getDate();  // определяем последнее число
    console.log(lastDay);
    let beginDay = ( date.getDay() == 0 ) ?  7 : date.getDay();  // определяем день недели, где пн =1 вс = 7
    console.log(beginDay);
    let trNumber = (((lastDay == 30) && (beginDay == 7)) || ((lastDay == 31) && (beginDay == 6)) || ((lastDay == 31) && (beginDay == 7))) ? 6 : 5;  // определяем количество строк
    console.log(trNumber);
//let innerHtml2 = "<table><tr><th>1</th><th>2</th></tr><tr><td>1</td><td>2</td></tr></table>";
let innerHtml = "<table><tr>";
  for (let i = 0; i < 7; i++) {
    innerHtml += `<th>${arr[i]}</th>`;
  }
let count = 0;
  for (i = 1; i <= trNumber; i++) {
    innerHtml += `<tr>`;
      for (let j = 1; j <= 7; j++) {
        count++;
        innerHtml += `<td>`;
          if ((count >= beginDay) && ((count - beginDay + 1) <= lastDay )) {
            innerHtml += `${count - beginDay + 1}`;
          }
          innerHtml += `</td>`;
      }
      innerHtml += `</tr>`;
  }
    return innerHtml;
    }
   // createCalendar(calendar, 2012, 9);
    //createCalendar(calendar, 2022, 1);
    calendar.innerHTML = createCalendar(calendar, 2012, 9);
  </script>
</body>
</html>


// ЗАДАЧА С ЧАСАМИ
<!DOCTYPE HTML>
<html>
<head>
  <style>
    .hour {
      color: red
    }
    .min {
      color: green
    }
    .sec {
      color: blue
    }
  </style>
</head>
<body>
  <div id="clock">
    <span class="hour">hh</span>:<span class="min">mm</span>:<span class="sec">ss</span>
  </div>
  <script>
    let timerId;
    function update() {
      let clock = document.getElementById('clock');
      let date = new Date();
      let hours = date.getHours();
      if (hours < 10) hours = '0' + hours;
      clock.children[0].innerHTML = hours;
      let minutes = date.getMinutes();
      if (minutes < 10) minutes = '0' + minutes;
      clock.children[1].innerHTML = minutes;
      let seconds = date.getSeconds();
      if (seconds < 10) seconds = '0' + seconds;
      clock.children[2].innerHTML = seconds;
    }
    function clockStart() {
      timerId = setInterval(update, 1000);
      update(); // <--  начать тут же, не ждать 1 секунду пока setInterval сработает
    }
    function clockStop() {
      clearInterval(timerId);
    }
  </script>
  <!-- клик по этой кнопке вызовет clockStart() -->
  <input type="button" onclick="clockStart()" value="Старт">
  <!-- клик по этой кнопке вызовет clockStop() -->
  <input type="button" onclick="clockStop()" value="Стоп">
</body>
</html>


// НАЙТИ РАЗМЕР ПРОКРУТКИ СНИЗУ
<script>
let scrollBottom = elem.scrollHeight - elem.scrollTop - elem.clientHeight;
</script>

// УЗНАТЬ ШИРИНУ ПОЛОСЫ ПРОКРУТКИ В БРАУЗЕРЕ
// создадим элемент с прокруткой
<script>
let div = document.createElement('div');
div.style.overflowY = 'scroll';
div.style.width = '50px';
div.style.height = '50px';
// мы должны вставить элемент в документ, иначе размеры будут равны 0
document.body.append(div);
let scrollWidth = div.offsetWidth - div.clientWidth;
//div.remove();
alert(scrollWidth);
</script>

// НАХОДИМ ГЕОМЕТРИЧЕСКИЙ ЦЕНТР ДЛЯ МЯЧА НА ПОЛЕ
<!DOCTYPE HTML>
<html>
<head>
  <style>
    #field {
      width: 200px;
      border: 10px groove black;
      background-color: #00FF00;
      position: relative;
    }

    #ball {
      position: absolute;
    }
  </style>
</head>
<body>
  <div id="field">
    <img src="https://en.js.cx/clipart/ball.svg" id="ball"> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
  </div>
  <script>
    let ball = document.querySelector('#ball');
    let field = document.querySelector('#field');
ball.style.left = `${field.clientWidth / 2 - 20}px`;
ball.style.top = `${field.clientHeight / 2 - 20}px`;
// мяч изначально не имеет offsetWidth , если его не прописать в css или html
  </script>
</body>
</html>

// поиск абсолютных координат у элементов с  бордерами

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
<style>
  body {
    padding: 20px 0 0 20px;
    cursor: pointer;
  }
  #field {
    overflow: hidden;
    width: 200px;
    height: 150px;
    border-top: 10px solid black;
    border-right: 10px solid gray;
    border-bottom: 10px solid gray;
    border-left: 10px solid black;
    background-color: #00FF00;
    font: 10px/1.2 monospace;
  }
  .triangle-right {
    position: relative;
    width: 0;
    height: 0;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    border-left: 20px solid red;
    text-indent: -20px;
    font: 12px/1 monospace;
  }
</style>
  <script>
    document.onclick = function(e) { // показывает координаты точки клика
      coords.innerHTML = e.clientX + ':' + e.clientY;
    };
  </script>
</head>
<body>
  Кликните в любом месте для получения координат в контексте окна.
  <br> Это для тестирования, чтобы проверить результат, который вы получили с помощью JavaScript.
  <br>
  <div id="coords">(координаты покажутся здесь)</div>
  <div id="field">
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
  </div>
  <div class="triangle-right" style="left:-20px;top:-176px">1</div>
  <div class="triangle-right" style="left:-10px;top:-178px">3</div>
  <div class="triangle-right" style="left:190px;top:-40px">4</div>
  <div class="triangle-right" style="left:200px;top:-42px">2</div>
  <script>
    function getCoords(elem) {
  let box = elem.getBoundingClientRect();
  return {
    top: box.top + window.pageYOffset,
    right: box.right + window.pageXOffset,
    bottom: box.bottom + window.pageYOffset,
    left: box.left + window.pageXOffset
  };
}
// let triangles = document.querySelectorAll('.triangle-right');
// console.dir(triangles);
// let cord = triangles[0].getBoundingClientRect();
// console.log(cord);
let field = document.querySelector('#field');
let cord = field.getBoundingClientRect();
console.log(cord);
let cordAbs = getCoords(field);
console.log(cordAbs);
let coords1X = cordAbs.left;
let coords1Y = cordAbs.bottom;
let coords2X = cordAbs.right;
let coords2Y = cordAbs.top;
let coords3X = cordAbs.left - field.clientLeft;
let coords3Y = cordAbs.bottom - field.clientTop;
// методом парса координат из ксс
let answer4 = [
  coords.right - parseInt(getComputedStyle(field).borderRightWidth),
  coords.bottom - parseInt(getComputedStyle(field).borderBottomWidth)
];
//Другим вариантом решения было бы добавление clientWidth/clientHeight к координатам верхнего левого угла. Так даже было бы лучше.
let answer4 = [
  coords.left + elem.clientLeft + elem.clientWidth,
  coords.top + elem.clientTop + elem.clientHeight
];
//let coords4X = cordAbs.left;
//let coords4Y = cordAbs.bottom;
console.log(coords3Y);
// let computedStyle = getComputedStyle(field);
// console.log(computedStyle.borderLeft);
    // ...ваш код...
  </script>
</body>
</html>








//  ЗАДАЧИ ГЛАВЫ СОБЫТИЯ ------------------------------------------------------------------------------------------------------------------------------------------------------

// ЗАДАЧА УЛУЧШЕННАЯ ПРОВЕРКА ТЕЛЕФОННОГО НОМЕРА--------------
<script>
  function checkPhoneKey(key) {
    return (key >= '0' && key <= '9') || key == '+' || key == '(' || key == ')' || key == '-' ||
      key == 'ArrowLeft' || key == 'ArrowRight' || key == 'Delete' || key == 'Backspace';
  }
  </script>
  <input onkeydown="return checkPhoneKey(event.key)" placeholder="Введите телефон" type="tel">




// ЗАДАЧА СОБЫТИЯ УКАЗАТЕЛЯ. СЛАЙДЕР -----------------
<!DOCTYPE html>
<style>
  .slider {
  border-radius: 5px;
  background: #E0E0E0;
  background: linear-gradient(left top, #E0E0E0, #EEEEEE);
  width: 310px;
  height: 15px;
  margin: 5px;
  touch-action: none;
}
.thumb {
  width: 10px;
  height: 25px;
  border-radius: 3px;
  position: relative;
  left: 10px;
  top: -5px;
  background: blue;
  cursor: pointer;
  touch-action: none;
}
</style>
<div id="slider" class="slider">
  <div class="thumb"></div>
</div>
<script>
  let thumb = slider.querySelector('.thumb');
  let shiftX;
  thumb.onpointerdown = function(event) {
    event.preventDefault(); // prevent selection start (browser action)
    shiftX = event.clientX - thumb.getBoundingClientRect().left;
    thumb.setPointerCapture(event.pointerId);  // привязать все действия к ползунку, для предотвращения активации сторонних скриптов
  };
  thumb.onpointermove = function(event) {
    let newLeft = event.clientX - shiftX - slider.getBoundingClientRect().left;
    // если указатель находится за пределами слайдера => отрегулировать "left", чтобы оставаться в пределах границ
    if (newLeft < 0) {
      newLeft = 0;
    }
    let rightEdge = slider.offsetWidth - thumb.offsetWidth;
    if (newLeft > rightEdge) {
      newLeft = rightEdge;
    }
    thumb.style.left = newLeft + 'px';
  };
  thumb.ondragstart = () => false;
</script>





// СПРЯТАТЬ ТЕКСТ ПОД КНОПКОЙ ----------------------------------
<input type="button" id="hider" value="Нажмите, чтобы спрятать текст" />
<div id="text">Текст</div>
<script>
  let hider = document.querySelector('#hider');
  let text = document.querySelector('#text');
  console.log(hider);
  console.log(text);
  hider.onclick = function(event) {
    //text.style.display = 'none';
    text.hidden = true;
    //text.innerHTML = '';
    // text.style.overflow = 'hidden'; - запрет прокрутки
    console.log(text);
    console.log(event);
  }

  <!DOCTYPE HTML>
<html>





// ЗАДАЧА ПЛАВНОЕ ПЕРЕМЕЩЕНИЕ МЯЧА ПО ПОЛЮ ПРИ КЛИКЕ
<head>
  <meta charset="utf-8">
  <style>
    #field {
      width: 200px;
      height: 150px;
      border: 10px solid black;
      background-color: #00FF00;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    #ball {
      position: absolute;
      left: 0;
      top: 0;
      width: 40px;
      height: 40px;
      transition: all 1s;
    }
  </style>
</head>
<body style="height:2000px">
  Нажмите на поле для перемещения мяча.
  <br>
  <div id="field">
    <img src="https://ru.js.cx/clipart/ball.svg" id="ball"> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
  </div>
  <script>
    field.onclick = function(event) {
      // координаты поля относительно окна браузера
      let fieldCoords = this.getBoundingClientRect();
      // мяч имеет абсолютное позиционирование (position:absolute), поле - относительное (position:relative)
      // таким образом, координаты мяча рассчитываются относительно внутреннего, верхнего левого угла поля
      let ballCoords = {
        top: event.clientY - fieldCoords.top - field.clientTop - ball.clientHeight / 2,
        left: event.clientX - fieldCoords.left - field.clientLeft - ball.clientWidth / 2
      };
      // запрещаем пересекать верхнюю границу поля
      if (ballCoords.top < 0) ballCoords.top = 0;
      // запрещаем пересекать левую границу поля
      if (ballCoords.left < 0) ballCoords.left = 0;
      // // запрещаем пересекать правую границу поля
      if (ballCoords.left + ball.clientWidth > field.clientWidth) {
        ballCoords.left = field.clientWidth - ball.clientWidth;
      }
      // запрещаем пересекать нижнюю границу поля
      if (ballCoords.top + ball.clientHeight > field.clientHeight) {
        ballCoords.top = field.clientHeight - ball.clientHeight;
      }
      ball.style.left = ballCoords.left + 'px';
      ball.style.top = ballCoords.top + 'px';
    }
  </script>
</body>
</html>




// ЗАДАЧА ОТКРЫТИЕ/ ЗАКРЫТИЕ МЕНЮ -------------------------------

<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <style>
    .title {
      cursor: pointer;
      width: max-content;
    }

    .green {
      color: green;

    }

    .cant_see {
      display: none;
    }

  </style>
</head>

<body>
  <div class="title" id='menu'>
    <span class="green">▶</span> <span class="cant_see green">▼</span> Сладости (нажми меня)!
  </div>
  <ul id='ul' class="cant_see">
    <li>Пирожное</li>
    <li>Пончик</li>
    <li>Мёд</li>
  </ul>
  <script>
    let menu = document.querySelector('#menu');
    let ul = document.querySelector('#ul')
    menu.onclick = function (event) {
      menu.children[0].classList.toggle('cant_see');
      menu.children[1].classList.toggle('cant_see');
      ul.classList.toggle('cant_see');
    }
  </script>
</body>
</html>





// ЗАДАЧА ---- КНОПКА ЗАКРЫТИЯ --------------------------
<!DOCTYPE HTML>
<html>
<head>
  <link rel="stylesheet" href="messages.css">
  <meta charset="utf-8">
</head>
<body>
  <div>
    <div class="pane">
      <h3>Лошадь</h3>
      <p>Домашняя лошадь — животное семейства непарнокопытных, одомашненный и единственный сохранившийся подвид дикой лошади, вымершей в дикой природе, за исключением небольшой популяции лошади Пржевальского.</p>
    </div>
    <div class="pane">
      <h3>Осёл</h3>
      <p>Домашний осёл (лат. Equus asinus asinus), или ишак, — одомашненный подвид дикого осла (Equus asinus), сыгравший важную историческую роль в развитии хозяйства и культуры человека и по-прежнему широко в хозяйстве многих развивающихся стран.</p>
    </div>
    <div class="pane">
      <h3>Кошка</h3>
      <p>Кошка, или домашняя кошка (лат. Felis silvestris catus), — домашнее животное, одно из наиболее популярных(наряду с собакой) «животных-компаньонов». Являясь одиночным охотником на грызунов и других мелких животных, кошка — социальное животное, использующее для общения широкий диапазон звуковых сигналов.</p>
    </div>
  </div>
  <script>
    let panes = document.querySelectorAll('.pane');

    for(let pane of panes) {
      pane.insertAdjacentHTML("afterbegin", '<button class="remove-button">[x]</button>');
      // кнопка становится первым потомком плитки (pane)
      pane.firstChild.onclick = () => pane.remove();
    }
  </script>
</body>
</html>





// ЗАДАЧА ----------- КАРУСЕЛЬ ЭЛЕМЕНТОВ --------------------

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
<style>
  body {
  padding: 10px;
}
.carousel {
  position: relative;
  width: 398px;
  padding: 10px 40px;
  border: 1px solid #CCC;
  border-radius: 15px;
  background: #eee;
}
.carousel img {
  width: 130px;
  height: 130px;
  /* делаем этот элемент блочным, чтобы убрать лишнее пространство вокруг картинок */
  display: block;
}
.arrow {
  position: absolute;
  top: 60px;
  padding: 0;
  background: #ddd;
  border-radius: 15px;
  border: 1px solid gray;
  font-size: 24px;
  line-height: 24px;
  color: #444;
  display: block;
}
.arrow:focus {
  outline: none;
}

.arrow:hover {
  background: #ccc;
  cursor: pointer;
}

.prev {
  left: 7px;
}

.next {
  right: 7px;
}

.gallery {
  width: 390px;
  overflow: hidden;
}

.gallery ul {
  height: 130px;
  width: 9999px;
  margin: 0;
  padding: 0;
  list-style: none;
  transition: margin-left 250ms;
  /* удаляем пустое пространство между элементами li, у которых установлен inline-block */
  /* http://davidwalsh.name/remove-whitespace-inline-block */
  font-size: 0;
}

.gallery li {
  display: inline-block;
}
</style>

</head>

<body>

  <div id="carousel" class="carousel">
    <button class="arrow prev">⇦</button>
    <div class="gallery">
      <ul>
        <li><img src="https://ru.js.cx/carousel/1.png"></li>
        <li><img src="https://ru.js.cx/carousel/2.png"></li>
        <li><img src="https://ru.js.cx/carousel/3.png"></li>
        <li><img src="https://ru.js.cx/carousel/4.png"></li>
        <li><img src="https://ru.js.cx/carousel/5.png"></li>
        <li><img src="https://ru.js.cx/carousel/6.png"></li>
        <li><img src="https://ru.js.cx/carousel/7.png"></li>
        <li><img src="https://ru.js.cx/carousel/8.png"></li>
        <li><img src="https://ru.js.cx/carousel/9.png"></li>
        <li><img src="https://ru.js.cx/carousel/10.png"></li>
      </ul>
    </div>
    <button class="arrow next">⇨</button>
  </div>

  <script>
    /* этот код помечает картинки, для удобства разработки */
    let i = 1;
    for(let li of carousel.querySelectorAll('li')) {
      li.style.position = 'relative';
      li.insertAdjacentHTML('beforeend', `<span style="position:absolute;left:0;top:0">${i}</span>`);
      i++;
    }

    /* конфигурация */
    let width = 130; // ширина картинки
    let count = 3; // видимое количество изображений

    let list = carousel.querySelector('ul');
    let listElems = carousel.querySelectorAll('li');

    let position = 0; // положение ленты прокрутки

    carousel.querySelector('.prev').onclick = function() {
      // сдвиг влево
      position += width * count;
      // последнее передвижение влево может быть не на 3, а на 2 или 1 элемент
      position = Math.min(position, 0)
      list.style.marginLeft = position + 'px';
    };

    carousel.querySelector('.next').onclick = function() {
      // сдвиг вправо
      position -= width * count;
      // последнее передвижение вправо может быть не на 3, а на 2 или 1 элемент
      position = Math.max(position, -width * (listElems.length - count));
      list.style.marginLeft = position + 'px';
    };
  </script>

</body>
</html>





// ЗАДАЧА - ИБИРАЕМ ТЕКСТ ПОД КНОПКОЙ

<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
<style>
  body {
  margin: 10px auto;
  width: 470px;
}

h3 {
  margin: 0;
  padding-bottom: .3em;
  padding-right: 20px;
  font-size: 1.1em;
}

p {
  margin: 0;
  padding: 0 0 .5em;
}

.pane {
  background: #edf5e1;
  padding: 10px 20px 10px;
  border-top: solid 2px #c4df9b;
  position: relative;
  /* display: none; */
}

.remove-button {
  position: absolute;
  font-size: 110%;
  top: 0;
  color: darkred;
  right: 10px;
  display: block;
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  cursor: pointer;
}
</style>
</head>

<body>

  <div id="container">
    <div class="pane" hidden-button>
      <h3>Лошадь</h3>
      <p>Домашняя лошадь - животное семейства непарнокопытных, одомашненный и единственный сохранившийся подвид дикой лошади, вымершей в дикой природе, за исключением небольшой популяции лошади Пржевальского.</p>
      <button class="remove-button">[x]</button>
    </div>
    <div class="pane" hidden-button>
      <h3>Осёл</h3>
      <p>Домашний осёл или ишак — одомашненный подвид дикого осла, сыгравший важную историческую роль в развитии хозяйства и культуры человека. Все одомашненные ослы относятся к африканским ослам.</p>
      <button class="remove-button">[x]</button>
    </div>
    <div class="pane" hidden-button>
      <h3>Кошка</h3>
      <p>Кошка, или домашняя кошка (лат. Félis silvéstris cátus), — домашнее животное, одно из наиболее популярных (наряду с собакой) "животных-компаньонов". С точки зрения научной систематики, домашняя кошка — млекопитающее семейства кошачьих отряда хищных. Ранее домашнюю кошку нередко рассматривали как отдельный биологический вид.
      </p>
      <button class="remove-button">[x]</button>
    </div>
  </div>

  <script>
document.addEventListener('click', function(event) {
if (!event.target.classList.contains('remove-button')) { return;
} else {
  let divElement = event.target.closest('div');
  divElement.style.display = 'none';
}
})
  </script>
</body>
</html>





//--------------ЗАДАЧА - РАБОТА СО СПИСКОМ ------------------------------
<!DOCTYPE HTML>
<html>
<head>
  <style>
    .tree span:hover {
      font-weight: bold;
    }
    .tree span {
      cursor: pointer;
    }
  </style>
  <meta charset="utf-8">
</head>
<body>
  <ul class="tree" id="tree">
    <li>Животные
      <ul>
        <li>Млекопитающие
          <ul>
            <li>Коровы</li>
            <li>Ослы</li>
            <li>Собаки</li>
            <li>Тигры</li>
          </ul>
        </li>
        <li>Другие
          <ul>
            <li>Змеи</li>
            <li>Птицы</li>
            <li>Ящерицы</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>Рыбы
      <ul>
        <li>Аквариумные
          <ul>
            <li>Гуппи</li>
            <li>Скалярии</li>
          </ul>
        </li>
        <li>Морские
          <ul>
            <li>Морская форель</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
  <script>
    // поместить все текстовые узлы в элемент <span>
    // он занимает только то место, которое необходимо для текста
    for (let li of tree.querySelectorAll('li')) {
      let span = document.createElement('span');
      li.prepend(span);
      span.append(span.nextSibling); // поместить текстовый узел внутрь элемента <span>
    }
    //  ловим клики на всём дереве
    tree.onclick = function(event) {
      if (event.target.tagName != 'SPAN') {
        return;
      }
      let childrenContainer = event.target.parentNode.querySelector('ul');
      if (!childrenContainer) return; // нет детей
      childrenContainer.hidden = !childrenContainer.hidden;
    }
  </script>
</body>
</html>






// ЗАДАЧА ОТМЕНЫ РАБОТЫ ПЕРЕХОДА ПО ССЫЛКЕ ПО УМОЛЧАНИЮ -----

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <style>
    #contents {
      padding: 5px;
      border: 1px green solid;
    }
  </style>
</head>
<body>
  <fieldset id="contents">
    <legend>#contents</legend>
    <p>
      Как насчёт того, чтобы прочитать <a href="https://wikipedia.org">Википедию</a> или посетить <a
        href="https://w3.org"><i>W3.org</i></a> и узнать о современных стандартах?
    </p>
  </fieldset>
  <script>
    document.addEventListener('click', function (event) {
      let aHref = event.target.closest('a');
      console.log(aHref);
      if (aHref) {
        let ask = confirm('Вы уверены что хотите перейти на сайт' + aHref.href + ' ?');
        console.log(ask);
        if (!ask) event.preventDefault()
    }
    })
  </script>
</body>
</html>






// ЗАДАЧА ГАЛЛЕРЕЯ ИЗОБРАЖЕНИЙ ----------------------------------------
<!DOCTYPE HTML>
<html>

<head>
  <title>Галерея</title>
  <meta charset="utf-8">
  <style>
    body {
  margin: 0;
  padding: 0;
  font: 75%/120% sans-serif;
}
#largeImg {
  border: solid 1px #ccc;
  width: 550px;
  height: 400px;
  padding: 5px;
}
#thumbs a {
  border: solid 1px #ccc;
  width: 100px;
  height: 100px;
  padding: 3px;
  margin: 2px;
  float: left;
}
#thumbs a:hover {
  border-color: #FF9900;
}
#thumbs li {
  list-style: none;
}
#thumbs {
  margin: 0;
  padding: 0;
}
  </style>
</head>
<body>
  <p><img id="largeImg" src="https://en.js.cx/gallery/img1-lg.jpg" alt="Large image"></p>
  <ul id="thumbs">
    <!-- браузер показывает небольшую встроенную подсказку из атрибута "title" при наведении курсора на текст -->
    <li>
      <a href="https://en.js.cx/gallery/img2-lg.jpg" title="Image 2"><img src="https://en.js.cx/gallery/img2-thumb.jpg"></a>
    </li>
    <li>
      <a href="https://en.js.cx/gallery/img3-lg.jpg" title="Image 3"><img src="https://en.js.cx/gallery/img3-thumb.jpg"></a>
    </li>
    <li>
      <a href="https://en.js.cx/gallery/img4-lg.jpg" title="Image 4"><img src="https://en.js.cx/gallery/img4-thumb.jpg"></a>
    </li>
    <li>
      <a href="https://en.js.cx/gallery/img5-lg.jpg" title="Image 5"><img src="https://en.js.cx/gallery/img5-thumb.jpg"></a>
    </li>
    <li>
      <a href="https://en.js.cx/gallery/img6-lg.jpg" title="Image 6"><img src="https://en.js.cx/gallery/img6-thumb.jpg"></a>
    </li>
  </ul>
  <script>
    thumbs.onclick = function(event) {
      let thumbnail = event.target.closest('a');

      if (!thumbnail) return;
      showThumbnail(thumbnail.href, thumbnail.title);
      event.preventDefault();
    }
    function showThumbnail(href, title) {
      largeImg.src = href;
      largeImg.alt = title;
    }
  </script>
</body>
</html>






// ЗАДАЧА ПОДСВЕТКИ ЭЛЕМЕНТОВ ПОД КУРСОРОМ ----------------------

<head>
  <meta charset="utf-8">
<style>
#text {
  display: block;
  height: 100px;
  width: 456px;
}

#table th {
  text-align: center;
  font-weight: bold;
}

#table td {
  width: 150px;
  white-space: nowrap;
  text-align: center;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 12px;
  cursor: pointer;
}

#table .nw {
  background: #999;
}

#table .n {
  background: #03f;
  color: #fff;
}

#table .ne {
  background: #ff6;
}

#table .w {
  background: #ff0;
}

#table .c {
  background: #60c;
  color: #fff;
}

#table .e {
  background: #09f;
  color: #fff;
}

#table .sw {
  background: #963;
  color: #fff;
}

#table .s {
  background: #f60;
  color: #fff;
}

#table .se {
  background: #0c3;
  color: #fff;
}

#table .highlight {
  background: red;
}
</style>
</head>

<body>
  <table id="table">
    <tr>
      <th colspan="3">Квадрат <em>Bagua</em>: Направление, Элемент, Цвет, Значение</th>
    </tr>
    <tr>
      <td class="nw"><strong>Северо-Запад</strong>
        <br>Металл
        <br>Серебро
        <br>Старейшины
      </td>
      <td class="n"><strong>Север</strong>
        <br>Вода
        <br>Синий
        <br>Перемены
      </td>
      <td class="ne"><strong>Северо-Восток</strong>
        <br>Земля
        <br>Жёлтый
        <br>Направление
      </td>
    </tr>
    <tr>
      <td class="w"><strong>Запад</strong>
        <br>Металл
        <br>Золото
        <br>Молодость
      </td>
      <td class="c"><strong>Центр</strong>
        <br>Всё
        <br>Пурпурный
        <br>Гармония
      </td>
      <td class="e"><strong>Восток</strong>
        <br>Дерево
        <br>Синий
        <br>Будущее
      </td>
    </tr>
    <tr>
      <td class="sw"><strong>Юго-Запад</strong>
        <br>Земля
        <br>Коричневый
        <br>Спокойствие
      </td>
      <td class="s"><strong>Юг</strong>
        <br>Огонь
        <br>Оранжевый
        <br>Слава
      </td>
      <td class="se"><strong>Юго-Восток</strong>
        <br>Дерево
        <br>Зеленый
        <br>Роман
      </td>
    </tr>

  </table>
<script>
// ячейка <td> под курсором в данный момент (если есть)
let currentElem = null;
table.onmouseover = function(event) {
  // перед тем, как войти на следующий элемент, курсор всегда покидает предыдущий
  // если currentElem есть, то мы ещё не ушли с предыдущего <td>,
  // это переход внутри - игнорируем такое событие
  if (currentElem) return;
  let target = event.target.closest('td');
  // переход не на <td> - игнорировать
  if (!target) return;
  // переход на <td>, но вне нашей таблицы (возможно при вложенных таблицах)
  // игнорировать
  if (!table.contains(target)) return;
  // ура, мы зашли на новый <td>
  currentElem = target;
  target.style.background = 'pink';
};
table.onmouseout = function(event) {
  // если мы вне <td>, то игнорируем уход мыши
  // это какой-то переход внутри таблицы, но вне <td>,
  // например с <tr> на другой <tr>
  if (!currentElem) return;
  // мы покидаем элемент – но куда? Возможно, на потомка?
  let relatedTarget = event.relatedTarget;
  while (relatedTarget) {
    // поднимаемся по дереву элементов и проверяем – внутри ли мы currentElem или нет
    // если да, то это переход внутри элемента – игнорируем
    if (relatedTarget == currentElem) return;
    relatedTarget = relatedTarget.parentNode;
  }
  // мы действительно покинули элемент
  currentElem.style.background = '';
  currentElem = null;
};
</script>
</body>
</html>





// ЗАДАЧА - СЛАЙДЕР ----------------------------

<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
<style>
  .slider {
  border-radius: 5px;
  background: #E0E0E0;
  background: linear-gradient(left top, #E0E0E0, #EEEEEE);
  width: 310px;
  height: 15px;
  margin: 5px;
}

.thumb {
  width: 10px;
  height: 25px;
  border-radius: 3px;
  position: relative;
  left: 10px;
  top: -5px;
  background: blue;
  cursor: pointer;
}
</style>
</head>

<body>

  <div id="slider" class="slider">
    <div class="thumb" id="thumb"></div>
  </div>

  <script>
const thumb = document.querySelector('#thumb');
const slider = document.querySelector('#slider');
    thumb.onmousedown = function(event1) {
      event.preventDefault(); // предотвратить запуск выделения (действие браузера)

      let shiftX = event1.clientX - thumb.getBoundingClientRect().left;
      // shiftY здесь не нужен, слайдер двигается только по горизонтали

      document.addEventListener('mousemove', onMouseMove);
      document.addEventListener('mouseup', onMouseUp);

      function onMouseMove(event2) {
        let newLeft = event2.clientX - shiftX - slider.getBoundingClientRect().left;

        // курсор вышел из слайдера => оставить бегунок в его границах.
        if (newLeft < 0) {
          newLeft = 0;
        }
        let rightEdge = slider.offsetWidth - thumb.offsetWidth;
        if (newLeft > rightEdge) {
          newLeft = rightEdge;
        }

        thumb.style.left = newLeft + 'px';
      }

      function onMouseUp() {
        document.removeEventListener('mouseup', onMouseUp);
        document.removeEventListener('mousemove', onMouseMove);
      }
    };
    thumb.ondragstart = function() {
      return false;
    };

  </script>
  </script>

</body>
</html>






// ЗАДАЧА ПРОВЕРКИ НАЖАТИЯ НЕСКОЛЬКИХ КЛАВИШ ПРИ ПОМОЩИ КОЛЛЕКЦИИ SET---


<!DOCTYPE HTML>
<!DOCTYPE HTML>
<html>
<body>
  <p>Нажмите "Q" и "W" вместе (язык значения не играет).</p>
  <script>
    function runOnKeys(func, ...args) {
      let pressed = new Set;  // коллекция без повторов
      document.addEventListener('keyup', () => {  // когда появляется событие поднятия клавиш - счетчик обнуляется
        pressed.clear();
      });
      document.addEventListener('keydown', event => {
        pressed.add(event.code);
        console.log(pressed);
        if (args.length == pressed.size) {   // проверка не нажаты ли лишние клавиши
          for (let item of args) {  // проверка соответствия массива аргументов с нашим сетом
            if (!pressed.has(item)) return;
          }
          func();
          arr.clear();
        }
      });
    }
    runOnKeys(
      () => alert("Привет!"),
      "KeyQ",
      "KeyW"
    );
  </script>
</body>
</html>
</html>






// ЗАДАЧА С БЕСКОНЕЧНОЙ ПРОКРУТКОЙ И ДОБАВЛЕНИЕМ КОНТЕНТА   ---------
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
</head>
<body>
<h1>Прокрути меня</h1>
<script>
  function populate() {  // функция добавляет в цикле строки пока не дойдет до низа
    while(true) {
      let windowRelativeBottom = document.documentElement.getBoundingClientRect().bottom;
      if (windowRelativeBottom > document.documentElement.clientHeight + 100) break;
      document.body.insertAdjacentHTML("beforeend", `<p>Date: ${new Date()}</p>`);
    }
  }
  window.addEventListener('scroll', populate);
  populate(); // инициализация документа
</script>
</body>
</html>

// ЗАДАЧА КНОПКА - ПРОКРУТКА ДОКУМЕНТА В САМЫЙ ВЕРХ. ПОЯВЛЯЕТСЯ КОНДА ДОК-Т НЕ В САМОМ НАЧАЛЕ
<!DOCTYPE HTML>
<html>
<head>
  <style>
    body,
    html {
      height: 100%;
      width: 100%;
      padding: 0;
      margin: 0;
    }
    #matrix {
      width: 400px;
      margin: auto;
      overflow: auto;
      text-align: justify;
    }
    #arrowTop {
      height: 9px;
      width: 14px;
      color: green;
      position: fixed;
      top: 10px;
      left: 10px;
      cursor: pointer;
    }
    #arrowTop::before {
      content: '▲';
    }
  </style>
  <meta charset="utf-8">
</head>
<body>
  <div id="matrix">
    <script>
      for (let i = 0; i < 2000; i++) document.writeln(i)
    </script>
  </div>
  <div id="arrowTop" hidden></div>
  <script>
    arrowTop.onclick = function() {
      window.scrollTo(pageXOffset, 0);
      // после scrollTo возникнет событие "scroll", так что стрелка автоматически скроется
    };
    window.addEventListener('scroll', function() {
      arrowTop.hidden = (pageYOffset < document.documentElement.clientHeight);
    });
  </script>
</body>
</html>



// ЗАДАЧА - ПОКАЗ БОЛЬШИХ КАРТИНОК ПРИ ПРОКРУТКЕ СТРАНИЦЫ(ЭКОНОМИЯ ВРЕМЕНИ ЗАГРУЗКИ)   -------   прокрутка

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
</head>

<body>

  <p>Текст и картинки взяты с https://wikipedia.org.</p>

  <h3>Все изображения с <code>data-src</code> загружаются, когда становятся видимыми.</h3>

  <h1>Солнечная система</h1>

  <p>Солнечнаяназад.</p>

  <p>Большая  системы.</p>

  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/planets.jpg" width="640" height="360">
  </figure>

  <h1>Солнце</h1>

  <p>Солнце — свету.</p>

  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/sun.jpg" width="658" height="658">
  </figure>

  <h1>Меркурий</h1>

  <p>Меркурий вещества.</p>

  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/mercury.jpg" width="390" height="390">
  </figure>

  <h1>Венера</h1>

  <p>Венера извержениями.</p>


  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/venus.jpg" width="390" height="390">
  </figure>

  <h1>Земля</h1>

  <p>Земля системы.</p>

  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/earth.jpg" width="390" height="390">
  </figure>

  <h1>Марс</h1>

  <p>Марс системы.</p>

  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/mars.jpg" width="390" height="390">
  </figure>

  <h1>Юпитер</h1>

  <p>Юпитер пятно.</p>

  <p>У Юпитера  Меркурий</p>


  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/jupiter.jpg" width="390" height="390">
  </figure>

  <h1>Сатурн</h1>

  <p>Сатурн, воды).</p>

  <p>У Сатурна атмосферой</p>

  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/saturn.jpg" width="805" height="390">
  </figure>

  <h1>Уран</h1>

  <p>Уран  тепла.</p>

  <p>У Урана открыты 27 спутников; крупнейшие — Титания, Оберон, Умбриэль, Ариэль и Миранда</p>


  <figure>
    <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/uranus.jpg" width="390" height="390">
  </figure>

  <h1>Нептун</h1>

  <p>Нептун, Сатурн.</p>

  <p>У Нептуна резонансе 1:1</p>

   <figure>
     <img src="placeholder.svg" data-src="https://ru.js.cx/clipart/solar/neptune.jpg" width="390" height="390">
   </figure>

   <script>
    /**
     * Проверка видимости элемента (в видимой части страницы)
     * Достаточно, чтобы верхний или нижний край элемента был виден
     */
    // function isVisible(elem) {

    //   let coords = elem.getBoundingClientRect();

    //   let windowHeight = document.documentElement.clientHeight;

    //   // видны верхний ИЛИ нижний край элемента
    //   let topVisible = coords.top > 0 && coords.top < windowHeight;
    //   let bottomVisible = coords.bottom < windowHeight && coords.bottom > 0;

    //   return topVisible || bottomVisible;
    // }


    // Вариант проверки, считающий элемент видимым,
    // если он не более чем -1 страница назад или +1 страница вперед.

    function isVisible(elem) {

      let coords = elem.getBoundingClientRect();

      let windowHeight = document.documentElement.clientHeight;

      let extendedTop = -windowHeight;
      let extendedBottom = 2 * windowHeight;

      // top visible || bottom visible
      let topVisible = coords.top > extendedTop && coords.top < extendedBottom;
      let bottomVisible = coords.bottom < extendedBottom && coords.bottom > extendedTop;

      return topVisible || bottomVisible;
    }


    function showVisible() {
      for (let img of document.querySelectorAll('img')) {
        let realSrc = img.dataset.src;
        if (!realSrc) continue;

        if (isVisible(img)) {
          // отключение кеширования
          // эта строка должна быть удалена в "боевом" коде
          realSrc += '?nocache=' + Math.random();

          img.src = realSrc;

          img.dataset.src = '';
        }
      }
    }

    window.addEventListener('scroll', showVisible);
    showVisible();
  </script>

</body>
</html>



//  ЗАДАЧА ЗАМЕНЫ DIV НА TEXTAREA.

<!DOCTYPE HTML>
<html>

<head>
  <link type="text/css" rel="stylesheet" href="my.css">
  <meta charset="utf-8">
</head>

<body>

  <ul>
    <li>Кликните на div ниже, чтобы отредактировать текст.</li>
    <li>Нажатие на Enter или потеря фокуса с ввода сохранят содержимое.</li>
  </ul>

  HTML-код разрешён.

  <div id="view" class="view">Текст</div>

  <script>
    let area = null;
    let view = document.getElementById('view');

    view.onclick = function() {
      editStart();
    };

    function editStart() {
      area = document.createElement('textarea');
      area.className = 'edit';
      area.value = view.innerHTML;

      area.onkeydown = function(event) {
        if (event.key == 'Enter') {
          this.blur();
        }
      };

      area.onblur = function() {
        editEnd();
      };

      view.replaceWith(area);
      area.focus();
    }

    function editEnd() {
      view.innerHTML = area.value;
      area.replaceWith(view);
    }
  </script>

</body>
</html>


// ЗАДАЧА ПЕРЕМЕЩЕНИЯ ЭЛЕМЕНТА ХТМЛ ПРИ ПОМОЩИ СТРЕЛОК КЛАВИАТУРЫ

<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <style>
    #mouse {
      display: inline-block;
      cursor: pointer;
      margin: 0;
    }

    #mouse:focus {
      outline: 1px dashed black;
    }
  </style>
</head>

<body>

  <p>Кликните по "изображению" мыши и перемещайте её с помощью клавиш со стрелками.</p>

  <pre id="mouse">
 _   _
(q\_/p)
 /. .\
=\_t_/=   __
 /   \   (
((   ))   )
/\) (/\  /
\  Y  /-'
 nn^nn
</pre>


  <script>
    mouse.tabIndex = 0;

    mouse.onclick = function() {
      this.style.left = this.getBoundingClientRect().left + 'px';
      this.style.top = this.getBoundingClientRect().top + 'px';

      this.style.position = 'fixed';
    };


    mouse.onkeydown = function(e) {
      switch (e.key) {
        case 'ArrowLeft':
          this.style.left = parseInt(this.style.left) - this.offsetWidth + 'px';
          return false;
        case 'ArrowUp':
          this.style.top = parseInt(this.style.top) - this.offsetHeight + 'px';
          return false;
        case 'ArrowRight':
          this.style.left = parseInt(this.style.left) + this.offsetWidth + 'px';
          return false;
        case 'ArrowDown':
          this.style.top = parseInt(this.style.top) + this.offsetHeight + 'px';
          return false;
      }
    };
  </script>

</body>
</html>


// ЗАДАЧА - ДЕПОЗИТНЫЙ КАЛЬКУЛЯТОР. МНГНОВЕННЫЙ РАССЧЕТ ВВОДИМЫХ ДАННЫХ

<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <style>
    td select,
    td input {
      width: 150px;
    }

    #diagram td {
      vertical-align: bottom;
      text-align: center;
      padding: 10px;
    }

    #diagram div {
      margin: auto;
    }
  </style>
</head>

<body>

  Депозитный калькулятор.

  <form name="calculator">
    <table>
      <tr>
        <td>Первоначальный депозит</td>
        <td>
          <input name="money" type="number" value="10000" required>
        </td>
      </tr>
      <tr>
        <td>Срок вклада?</td>
        <td>
          <select name="months">
            <option value="3">3 (минимум)</option>
            <option value="6">6 (полгода)</option>
            <option value="12" selected>12 (год)</option>
            <option value="18">18 (1.5 года)</option>
            <option value="24">24 (2 года)</option>
            <option value="30">30 (2.5 года)</option>
            <option value="36">36 (3 года)</option>
            <option value="60">60 (5 лет)</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>Годовая процентная ставка?</td>
        <td>
          <input name="interest" type="number" value="5" required>
        </td>
      </tr>
    </table>


  </form>


  <table id="diagram">
    <tr>
      <th>Было:</th>
      <th>Станет:</th>
    </tr>
    <tr>
      <th id="money-before"></th>
      <th id="money-after"></th>
    </tr>
    <td>
      <div style="background: red;width:40px;height:100px"></div>
    </td>
    <td>
      <div style="background: green;width:40px;height:0" id="height-after"></div>
    </td>
  </table>

  <script>

    let form = document.forms.calculator;

    form.money.oninput = calculate;
    form.months.onchange = calculate;
    form.interest.oninput = calculate;

    function calculate() {
      let initial = +form.money.value;
      if (!initial) return;

      let interest = form.interest.value * 0.01;

      if (!interest) return;

      let years = form.months.value / 12;
      if (!years) return;

      let result = Math.round(initial * (1 + interest) ** years);

      let height = result / form.money.value * 100 + 'px';
      document.getElementById('height-after').style.height = height;
      document.getElementById('money-before').innerHTML = form.money.value;
      document.getElementById('money-after').innerHTML = result;
    }

    calculate();
  </script>


</body>
</html>




// ЗАДАЧА ВАЛИДАЦИЯ ФОРМЫ.  ------------------

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
        .validate-this .error {
      border-color: red;
    }

    .validate-this .error-text {
      display: block;
      color: red;
    }
  </style>
</head>
<body>
  <form class="validate-this">
  <table>
    <tr>
      <td>От кого</td>
      <td>
        <input name="from" type="text" data-error="Укажите от кого.">
      </td>
    </tr>
    <tr>
      <td>Ваш пароль</td>
      <td>
        <input name="password" type="password" data-error="Укажите пароль."  data-wrong-pass="Пароли не совпадают.">
      </td>
    </tr>
    <tr>
      <td>Повторите пароль</td>
      <td>
        <input name="password2" type="password" data-error>
      </td>
    </tr>
    <tr>
      <td>Повторите еще раз</td>
      <td>
        <input name="password3" type="password" data-error>
      </td>
    </tr>
    <tr>
      <td>Куда</td>
      <td>
        <select name="to" data-error="Укажите, куда.">
          <option></option>
          <option value="1">Отдел снабжения</option>
          <option value="2">Отдел разработки</option>
          <option value="3">Директору</option>
        </select>
      </td>
    </tr>
  </table>

  Сообщение:
  <label>
    <textarea name="message" style="display:block;width:400px;height:100px" data-error="Отсутствует текст."></textarea>
  </label>

  <input type="submit" value="Проверить">
</form>
<script>
  (function(){
  var form = document.querySelector(".validate-this");
  form.addEventListener("submit", validate);
  function validate(e) {
    e.preventDefault();
    var form = this
      , inputs = form.querySelectorAll("[data-error]");
    clear(inputs, function() {
      checkIsEmpty(inputs);
    });
    function checkIsEmpty(inputs) {
      var isEmpty = false;
      for (var i = 0; i < inputs.length; i++) {
        var input = inputs[i];
        if (input.value.trim() === "") {
          isEmpty = true;
          markInput(input);
        }
      }
      var inputsTypePassword = form.querySelectorAll("[type='password']")
        , checkPassComplete = checkPassword(inputsTypePassword);
      if (!isEmpty && checkPassComplete) {
        setTimeout(function() {
            alert("checking is complete");
            form.submit();
        }, 300);
      }
    }
    function markInput(input) {
      input.classList.add("error");
      var text = input.getAttribute("data-error");
      if (!text) return;
      var div = document.createElement("div");
      div.textContent = text;
      div.className = "error-text";
      input.parentNode.appendChild(div);
    }
    function clear(inputsItem, callback) {
      for (var i = 0; i < inputsItem.length; i++) {
        var input = inputsItem[i]
          , parent = input.parentNode
          , message = parent.querySelector(".error-text");
        input.classList.remove("error");
        if (message) parent.removeChild(message);
      }
      if (callback) callback();
    }
    function checkPassword(inputsTypePassword) {
      if (!inputsTypePassword) return true;
      clear(inputsTypePassword);
      var isValid = true
        , firstPassInput = inputsTypePassword[0]
        , pattern = firstPassInput.value.trim()
        , text = firstPassInput.getAttribute("data-wrong-pass")
        , parent = firstPassInput.parentNode;
      for (var i = 1; i < inputsTypePassword.length; i++) {
        var input = inputsTypePassword[i];

        if (input.value.trim() !== pattern  ||  input.value.trim() === "") {
          isValid = false;
        }
      }
      if (!isValid) {
        for (var k = 0; k < inputsTypePassword.length; k++) {
          var errorInput = inputsTypePassword[k];
          var value = errorInput.value;
          markInput(errorInput);
          if (value !== "") {
            parent.querySelector(".error-text").textContent = text;
          }
        }
      }
      return isValid;
    }
  }
}());
</script>
</body>
</html>




//  ЗАДАЧА ПОКАЗА МОДАЛЬНОГО ОКНА С ВОДОМ ДАННЫХ ---------------
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
<style>
  html,
body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
}

#prompt-form {
  display: inline-block;
  padding: 5px 5px 5px 70px;
  width: 200px;
  border: 1px solid black;
  background: white url(https://en.js.cx/clipart/prompt.png) no-repeat left 5px;
  vertical-align: middle;
}

#prompt-form-container {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9999;
  display: none;
  width: 100%;
  height: 100%;
  text-align: center;
}

#prompt-form-container:before {
  display: inline-block;
  height: 100%;
  content: '';
  vertical-align: middle;
}

#cover-div {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9000;
  width: 100%;
  height: 100%;
  background-color: gray;
  opacity: 0.3;
}

#prompt-form input[name="text"] {
  display: block;
  margin: 5px;
  width: 180px;
}
</style>

</head>

<body style="height:3000px">

  <h2>Кликните на кнопку ниже</h2>

  <input type="button" value="Кликните, чтобы увидеть форму" id="show-button">


  <div id="prompt-form-container">
    <form id="prompt-form">
      <div id="prompt-message"></div>
      <input name="text" type="text">
      <input type="submit" value="Ok">
      <input type="button" name="cancel" value="Отмена">
    </form>
  </div>

  <script>
    // Показать полупрозрачный DIV, чтобы затенить страницу
    // (форма располагается не внутри него, а рядом, потому что она не должна быть полупрозрачной)
    function showCover() {
      let coverDiv = document.createElement('div');
      coverDiv.id = 'cover-div';

      // убираем возможность прокрутки страницы во время показа модального окна с формой
      document.body.style.overflowY = 'hidden';

      document.body.append(coverDiv);
    }

    function hideCover() {
      document.getElementById('cover-div').remove();
      document.body.style.overflowY = '';
    }

    function showPrompt(text, callback) {
      showCover();
      let form = document.getElementById('prompt-form');
      let container = document.getElementById('prompt-form-container');
      document.getElementById('prompt-message').innerHTML = text;
      form.text.value = '';

      function complete(value) {
        hideCover();
        container.style.display = 'none';
        document.onkeydown = null;
        callback(value);
      }

      form.onsubmit = function() {
        let value = form.text.value;
        if (value == '') return false; // игнорируем отправку пустой формы

        complete(value);
        return false;
      };

      form.cancel.onclick = function() {
        complete(null);
      };

      document.onkeydown = function(e) {
        if (e.key == 'Escape') {
          complete(null);
        }
      };

      let lastElem = form.elements[form.elements.length - 1];
      let firstElem = form.elements[0];

      lastElem.onkeydown = function(e) {
        if (e.key == 'Tab' && !e.shiftKey) {
          firstElem.focus();
          return false;
        }
      };

      firstElem.onkeydown = function(e) {
        if (e.key == 'Tab' && e.shiftKey) {
          lastElem.focus();
          return false;
        }
      };

      container.style.display = 'block';
      form.elements.text.focus();
    }

    document.getElementById('show-button').onclick = function() {
      showPrompt("Введите что-нибудь<br>...умное :)", function(value) {
        alert("Вы ввели: " + value);
      });
    };
  </script>


</body>
</html>


// FETCH-ЗАПРОСЫ НА ГИТХАБ. В УЧЕБНИКЕ ДРУГОЕ РЕШЕНИЕ

<!doctype html>
<script src="https://ru.js.cx/test/libs.js"></script>

<script>
let users = [];
  async function getUsers(...args) {
    /* ваш код */
    for ( let name of args) {
let response = await fetch(`https://api.github.com/users/${name}`);
 if (response.ok) {
   let user = await response.json();
 console.log(user);
 users.push(user);
 } else {
  console.log("Ошибка HTTP: " + response.status);
  users.push(null);
}
    }
console.log(users);
  }
  getUsers('iliakan', 'remy', 'no.such.users');
</script>
</html>
